webpackJsonp([1],{"5OHe":function(e,t){},"HoC+":function(e,t){},MLmC:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},r,!1,function(e){n("MLmC")},null,null).exports,s=n("/ocq"),i=n("L7Pj"),u=n.n(i),c="";c="localhost"==location.hostname?"localhost:3000":"119.23.57.251:3000";var l={name:"index",data:function(){return{username:"",password:""}},methods:{allLoad:function(){var e=u()("#content"),t=u()("#status"),n=u()("#input"),a=this,r=!1,o=a.username,s=new WebSocket("ws:"+c);s.onopen=function(){s.send(a.username)},s.onmessage=function(n){var a=JSON.parse(n.data);"color"===a.type?(r=a.data,t.text(o+": ").css("color",r)):"message"===a.type&&function(t,n,a,r){e.append('<p><span style="color:'+a+'">'+t+"</span> @ "+ +r.getHours()+":"+(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes())+"----"+n+"</p>")}(a.data.author,a.data.text,a.data.color,new Date(a.data.time))},n.keydown(function(e){if(13===e.keyCode){var t=u()(this).val();if(!t)return;s.send(t),u()(this).val("")}})}},created:function(){this.username=localStorage.getItem("username")},mounted:function(){this.allLoad()}},p={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chatroom"},[t("div",{attrs:{id:"content"}}),this._v(" "),t("div",[t("span",{attrs:{id:"status"}},[this._v("Connecting...")]),this._v(" "),t("input",{attrs:{type:"text",id:"input"}})])])}]};var d=n("VU/8")(l,p,!1,function(e){n("ZrpZ")},"data-v-7012ece5",null).exports,m={name:"login",data:function(){return{username:"",password:"",oldFlag:!1}},methods:{jump:function(){localStorage.setItem("username",this.username),this.$router.push("/index")}},created:function(){this.oldFlag=!!localStorage.getItem("username"),this.username=localStorage.getItem("username")?localStorage.getItem("username"):""},mounted:function(){this.oldFlag&&setTimeout(this.jump,2e3)}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[e.oldFlag?n("div",{staticClass:"enter"},[n("h2",[e._v(e._s(e.username)+",欢迎回来")]),e._v(" "),n("p",[n("mt-spinner",{attrs:{type:"triple-bounce"}})],1)]):n("div",{staticClass:"enter"},[n("span",{staticClass:"name"},[e._v("昵称")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("div",{staticClass:"enter-button"},[n("mt-button",{attrs:{plain:"",type:"primary"},on:{click:e.jump}},[e._v("登入")])],1)]),e._v(" "),n("div",{staticClass:"bulr"})])},staticRenderFns:[]};var h=n("VU/8")(m,g,!1,function(e){n("HoC+")},null,null).exports;a.default.use(s.a);var f=new s.a({routes:[{path:"/index",name:"index",component:d},{path:"/",name:"login",component:h}]}),v=n("wSez"),w=n.n(v),M=(n("5OHe"),n("mvHQ")),S=n.n(M),x=n("pFYg"),y=n.n(x),_=n("HSQo"),b=n.n(_),C=n("//Fk"),I=n.n(C),D=n("2sCs"),F=n.n(D),j={baseURL:"http://119.23.57.251:3000/",timeout:2e4,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},maxContentLength:5e3};"localhost"==location.hostname?j.baseURL=" http://119.23.57.251:3000/":j.baseURL="http://119.23.57.251:3000/";var R=j,H=(n("MqOw"),n("P6uy")),L=n.n(H),O=n("mw3O"),E=n.n(O);var $={wxConfig:function(e){q.getData("get","/wd_wechat/sign",{url:encodeURI("http://119.23.57.251:3000/")}).then(function(t){var n=t.data.data;n.debug=!1,n.jsApiList=e,a.default.prototype.wx.config(n)})}};new a.default({router:f});var T=F.a.create(R);T.interceptors.response.use(function(e){return e},function(e){return e.response?I.a.resolve(e.response):e.request?(console.error("网络异常，请检查您的网络并刷新重试！"),I.a.reject(e.request)):(console.error("未知错误，请刷新重试！"),I.a.reject(e.message))}),b()(a.default.prototype,{axios:{get:function(){return T}},$http:{get:function(){return T}},videojs:{get:function(){return videojs}},wx:{get:function(){return L.a}}});var U={cloneObj:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=void 0,n=e.constructor===Array?[]:{};if("object"===(void 0===e?"undefined":y()(e))){if(window.JSON)t=S()(e),n=JSON.parse(t);else for(var a in e)n[a]="object"===y()(e[a])?cloneObj(e[a]):e[a];return n}}),GetQueryUrl:function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=("?"+e.split("?")[1]).substr(1).match(n);return null!=a?unescape(a[2]):""},getTime:function(e,t){var n=new Date;return n.setTime(1e3*e),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes()};for(var n in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},n.format(t)},timeFormat:function(e){var t,n,a,r,o,s=e,i=parseInt((new Date).getTime()/1e3),u=new Date(1e3*s),c=u.getFullYear(),l=u.getMonth()+1,p=u.getDate(),d=u.getHours(),m=u.getMinutes(),g=u.getSeconds();return l<10&&(l="0"+l),p<10&&(p="0"+p),d<10&&(d="0"+d),m<10&&(m="0"+m),g<10&&(g="0"+g),o=i-s,r=parseInt(o/86400),a=parseInt(o/3600),n=parseInt(o/60),t=parseInt(o),r>0&&r<3?r+"天前":r<=0&&a>0?a+"小时前":a<=0&&n>0?n+"分钟前":t<60?t<=0?"刚刚发表":t+"秒前":r>=3&&r<30?l+"-"+p+" "+d+":"+m:r>=30?c+"-"+l+"-"+p+" "+d+":"+m:void 0},getData:function(e,t,n){var a=void 0;return"get"==e?a=T.get(t,{params:n}):"post"==e&&(a=T.post(t,E.a.stringify(n))),new I.a(function(e,n){a.then(function(n){200==n.status&&(401==n.data.code?console.error("未登录"):500==n.data.code?console.error("接口出错了！url:"+t):404==n.data.code||405==n.data.code?console.error("接口未找到!url:"+t):403==n.data.code?console.error("token不存在"):422==n.data.code?console.error("参数缺失，请确认参数"):console.error("other",n),e(n))}).catch(function(t){t.response?(e(t.response),console.log(t.response,"error response")):t.request?(e(t.request),console.log(t.request,"error request")):(e(t.message),console.log(t.message,"error message"))})})},shareFuc:function(e){$.wxConfig(["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]),L.a.ready(function(){L.a.onMenuShareAppMessage(e),L.a.onMenuShareTimeline(e),L.a.onMenuShareQQ(e),L.a.onMenuShareWeibo(e),L.a.onMenuShareQZone(e)})},defaultShare:function(e){var t={title:"聊天室小demo",desc:"马栏山专用聊天室",link:encodeURI("http://119.23.57.251:3000/"),imgUrl:"http://yylm-wd-wap.qeebu.com/static/shareLama.jpg"};U.shareFuc(t)},hideShare:function(){$.wxConfig(["hideMenuItems","hideOptionMenu"]),L.a.ready(function(){L.a.hideOptionMenu(),L.a.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline"]})})},timeStamp2TimeFrame:function(e){var t=(new Date).getTime();13!==e.length&&(e*=1e3);var n=t-parseInt(e),a="";if(n>=0){var r=n/2592e6,o=n/864e5,s=n/36e5,i=n/6e4;if(o>=1&&o<=2)a="昨天";else if(o<1&&s>=1)a=parseInt(s)+"小时前";else if(s<1&&i>=1)a=parseInt(i)+"分钟前";else if(i<1)a="刚刚";else if(r>=12){a=(u=new Date(e)).getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日"}else{var u;a=(u=new Date(e)).getMonth()+1+"月"+u.getDate()+"日"}}else a="";return a},timeStamp2Standard:function(e){13!==e.length&&(e*=1e3);var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())},timeStamp2Standard2:function(e){13!==e.length&&(e*=1e3);var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()},resizeWindow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"btn_next";t="#"+t,window.onresize=function(){e>document.documentElement.clientHeight?u()(t).hide():u()(t).show()}}},q=U;a.default.use(w.a),a.default.config.productionTip=!1,a.default.prototype.interface=q,new a.default({el:"#app",router:f,components:{App:o},template:"<App/>"})},ZrpZ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f627b8bb6c210d4da55a.js.map