webpackJsonp([1],{"5OHe":function(e,t){},"HoC+":function(e,t){},MLmC:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},r,!1,function(e){n("MLmC")},null,null).exports,s=n("/ocq"),i=n("L7Pj"),u=n.n(i),c={name:"index",data:function(){return{username:"",password:""}},methods:{allLoad:function(){var e=u()("#content"),t=u()("#status"),n=u()("#input"),a=!1,r=!1,o=new WebSocket("ws:http://localhost:3000");o.onopen=function(){t.text("输入 姓名:")},o.onmessage=function(n){var o=JSON.parse(n.data);"color"===o.type?(a=o.data,t.text(r+": ").css("color",a)):"message"===o.type&&function(t,n,a,r){e.append('<p><span style="color:'+a+'">'+t+"</span> @ "+ +r.getHours()+":"+(r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes())+"----"+n+"</p>")}(o.data.author,o.data.text,o.data.color,new Date(o.data.time))},n.keydown(function(e){if(13===e.keyCode){var t=u()(this).val();if(!t)return;o.send(t),u()(this).val(""),!1===r&&(r=t)}})}},created:function(){this.username=localStorage.getItem("username")},mounted:function(){this.allLoad()}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"chatroom"},[t("div",{attrs:{id:"content"}}),this._v(" "),t("div",[t("span",{attrs:{id:"status"}},[this._v("Connecting...")]),this._v(" "),t("input",{attrs:{type:"text",id:"input"}})])])}]};var p=n("VU/8")(c,l,!1,function(e){n("gkUQ")},null,null).exports,d={name:"login",data:function(){return{username:"",password:"",oldFlag:!1}},methods:{jump:function(){localStorage.setItem("username",this.username),this.$router.push("/index")}},created:function(){this.oldFlag=!!localStorage.getItem("username"),this.username=localStorage.getItem("username")?localStorage.getItem("username"):""},mounted:function(){this.oldFlag&&setTimeout(this.jump,2e3)}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[e.oldFlag?n("div",{staticClass:"enter"},[n("h2",[e._v(e._s(e.username)+",欢迎回来")]),e._v(" "),n("p",[n("mt-spinner",{attrs:{type:"triple-bounce"}})],1)]):n("div",{staticClass:"enter"},[n("span",{staticClass:"name"},[e._v("昵称")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("div",{staticClass:"enter-button"},[n("mt-button",{attrs:{plain:"",type:"primary"},on:{click:e.jump}},[e._v("登入")])],1)]),e._v(" "),n("div",{staticClass:"bulr"})])},staticRenderFns:[]};var m=n("VU/8")(d,g,!1,function(e){n("HoC+")},null,null).exports;a.default.use(s.a);var h=new s.a({routes:[{path:"/index",name:"index",component:p},{path:"/",name:"login",component:m}]}),f=n("wSez"),v=n.n(f),w=(n("5OHe"),n("mvHQ")),M=n.n(w),S=n("pFYg"),x=n.n(S),y=n("HSQo"),_=n.n(y),b=n("//Fk"),C=n.n(b),I=n("2sCs"),D=n.n(I),F={baseURL:"http://119.23.57.251:3000/",timeout:2e4,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},maxContentLength:5e3};"localhost"==location.hostname?F.baseURL=" http://119.23.57.251:3000/":F.baseURL="http://119.23.57.251:3000/";var j=F,R=(n("MqOw"),n("P6uy")),H=n.n(R),L=n("mw3O"),O=n.n(L);var U={wxConfig:function(e){$.getData("get","/wd_wechat/sign",{url:encodeURI("http://119.23.57.251:3000/")}).then(function(t){var n=t.data.data;n.debug=!1,n.jsApiList=e,a.default.prototype.wx.config(n)})}};new a.default({router:h});var E=D.a.create(j);E.interceptors.response.use(function(e){return e},function(e){return e.response?C.a.resolve(e.response):e.request?(console.error("网络异常，请检查您的网络并刷新重试！"),C.a.reject(e.request)):(console.error("未知错误，请刷新重试！"),C.a.reject(e.message))}),_()(a.default.prototype,{axios:{get:function(){return E}},$http:{get:function(){return E}},videojs:{get:function(){return videojs}},wx:{get:function(){return H.a}}});var Q={cloneObj:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=void 0,n=e.constructor===Array?[]:{};if("object"===(void 0===e?"undefined":x()(e))){if(window.JSON)t=M()(e),n=JSON.parse(t);else for(var a in e)n[a]="object"===x()(e[a])?cloneObj(e[a]):e[a];return n}}),GetQueryUrl:function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=("?"+e.split("?")[1]).substr(1).match(n);return null!=a?unescape(a[2]):""},getTime:function(e,t){var n=new Date;return n.setTime(1e3*e),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes()};for(var n in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},n.format(t)},timeFormat:function(e){var t,n,a,r,o,s=e,i=parseInt((new Date).getTime()/1e3),u=new Date(1e3*s),c=u.getFullYear(),l=u.getMonth()+1,p=u.getDate(),d=u.getHours(),g=u.getMinutes(),m=u.getSeconds();return l<10&&(l="0"+l),p<10&&(p="0"+p),d<10&&(d="0"+d),g<10&&(g="0"+g),m<10&&(m="0"+m),o=i-s,r=parseInt(o/86400),a=parseInt(o/3600),n=parseInt(o/60),t=parseInt(o),r>0&&r<3?r+"天前":r<=0&&a>0?a+"小时前":a<=0&&n>0?n+"分钟前":t<60?t<=0?"刚刚发表":t+"秒前":r>=3&&r<30?l+"-"+p+" "+d+":"+g:r>=30?c+"-"+l+"-"+p+" "+d+":"+g:void 0},getData:function(e,t,n){var a=void 0;return"get"==e?a=E.get(t,{params:n}):"post"==e&&(a=E.post(t,O.a.stringify(n))),new C.a(function(e,n){a.then(function(n){200==n.status&&(401==n.data.code?console.error("未登录"):500==n.data.code?console.error("接口出错了！url:"+t):404==n.data.code||405==n.data.code?console.error("接口未找到!url:"+t):403==n.data.code?console.error("token不存在"):422==n.data.code?console.error("参数缺失，请确认参数"):console.error("other",n),e(n))}).catch(function(t){t.response?(e(t.response),console.log(t.response,"error response")):t.request?(e(t.request),console.log(t.request,"error request")):(e(t.message),console.log(t.message,"error message"))})})},shareFuc:function(e){U.wxConfig(["onMenuShareAppMessage","onMenuShareTimeline","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"]),H.a.ready(function(){H.a.onMenuShareAppMessage(e),H.a.onMenuShareTimeline(e),H.a.onMenuShareQQ(e),H.a.onMenuShareWeibo(e),H.a.onMenuShareQZone(e)})},defaultShare:function(e){var t={title:"聊天室小demo",desc:"马栏山专用聊天室",link:encodeURI("http://119.23.57.251:3000/"),imgUrl:"http://yylm-wd-wap.qeebu.com/static/shareLama.jpg"};Q.shareFuc(t)},hideShare:function(){U.wxConfig(["hideMenuItems","hideOptionMenu"]),H.a.ready(function(){H.a.hideOptionMenu(),H.a.hideMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline"]})})},timeStamp2TimeFrame:function(e){var t=(new Date).getTime();13!==e.length&&(e*=1e3);var n=t-parseInt(e),a="";if(n>=0){var r=n/2592e6,o=n/864e5,s=n/36e5,i=n/6e4;if(o>=1&&o<=2)a="昨天";else if(o<1&&s>=1)a=parseInt(s)+"小时前";else if(s<1&&i>=1)a=parseInt(i)+"分钟前";else if(i<1)a="刚刚";else if(r>=12){a=(u=new Date(e)).getFullYear()+"年"+(u.getMonth()+1)+"月"+u.getDate()+"日"}else{var u;a=(u=new Date(e)).getMonth()+1+"月"+u.getDate()+"日"}}else a="";return a},timeStamp2Standard:function(e){13!==e.length&&(e*=1e3);var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())},timeStamp2Standard2:function(e){13!==e.length&&(e*=1e3);var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()},resizeWindow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"btn_next";t="#"+t,window.onresize=function(){e>document.documentElement.clientHeight?u()(t).hide():u()(t).show()}}},$=Q;a.default.use(v.a),a.default.config.productionTip=!1,a.default.prototype.interface=$,new a.default({el:"#app",router:h,components:{App:o},template:"<App/>"})},gkUQ:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1dbb9aadbcddfa687b0e.js.map